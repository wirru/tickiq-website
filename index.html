<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tickIQ — Measure Watch Accuracy</title>
    <meta name="description" content="Turn your iPhone into a professional-grade watch timing tool. Check if your watch is running fast or slow with precision accuracy.">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/icons/favicon-32x32.png">
    <link rel="apple-touch-icon" href="assets/icons/app-icon.png">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header will be injected here -->
        <header></header>
        
        <main>
            <div class="hero">
                <h1 class="main-headline">The #1 companion app for your mechanical watches</h1>
                <p class="subheadline">
                    The only app that helps you truly understand your watch. Get instant accuracy readings, AI-powered insights, and effortless collection tracking—all in a sleek, intuitive app. Built for serious collectors, yet simple enough for anyone with a watch they love.
                </p>
            </div>
        </main>
    </div>
    
    <!-- Hero Section with Image -->
    <section class="hero-showcase">
        <div class="showcase-container">
            <p class="showcase-eyebrow">How it Works</p>
            <h2 class="showcase-headline">Measure your watch's accuracy using only your phone's microphone</h2>
            
            <!-- Wrapper to contain overflow -->
            <div class="hero-media-wrapper">
                <div class="hero-media-container">
                    <video class="hero-video" id="hero-video" muted loop playsinline preload="auto">
                        <source src="assets/videos/tickiq-measurement-web-noaudio.mp4" type="video/mp4">
                    </video>
                    <img src="assets/images/hands-hero-foreground-hard-edge.png" alt="Watch collection" class="hero-image-overlay">
                </div>
            </div>
            
            <div class="showcase-description">
                <p>Using advanced digital signal processing, tickIQ recreates the timegrapher tools used by professional watchmakers worldwide. With striking precision, <span class="highlight">we use your phone's microphone to detect the faint mechanical heartbeat of your watch</span>—effortlessly revealing its true accuracy and mechanical health <span class="highlight">in a matter of seconds</span>.</p>
            </div>
        </div>
    </section>
    
    <!-- AI Insights Section -->
    <section class="insights-section">
        <div class="insights-container">
            <p class="insights-eyebrow">AI Powered</p>
            <h2 class="insights-headline">Unlock insights about your watch in seconds</h2>
            <div class="insights-hero-image">
                <div class="insights-media-container">
                    <video class="insights-video" id="insights-video" muted loop playsinline preload="auto">
                        <source src="assets/videos/tickiq-ai-insights-web.mp4" type="video/mp4">
                    </video>
                    <img src="assets/images/iphone16_frame.png" alt="tickIQ AI insights on iPhone" class="insights-phone">
                </div>
            </div>
            <div class="insights-description">
                <p>Our AI-powered analysis transforms raw measurements into <span class="highlight">professional-grade insights you can actually understand</span>. Get instant summaries of your watch's health, personalized maintenance recommendations, and beautiful visualizations that track your timepiece's performance over days, weeks, and months—helping you <span class="highlight">catch issues before they become problems</span>.</p>
            </div>
        </div>
    </section>
    
    <!-- Main content section -->
    <section class="content-section">
        <div class="content-container">
            <!-- Content will go here -->
        </div>
    </section>
    
    <!-- Footer will be injected here -->
    <footer></footer>
    
    <!-- Load the shared components -->
    <script src="js/components.js"></script>
    
    <!-- Video preloading and scroll trigger -->
    <script>
        (function() {
            // Handle both hero and insights videos
            const videos = [
                { id: 'hero-video', hasStarted: false },
                { id: 'insights-video', hasStarted: false }
            ];
            
            videos.forEach(videoConfig => {
                const video = document.getElementById(videoConfig.id);
                if (!video) return;
                
                // Force video to load but ensure it's paused
                video.load();
                video.pause();
                video.currentTime = 0;
                
                // Function to start video playback
                const startPlayback = () => {
                    if (!videoConfig.hasStarted) {
                        videoConfig.hasStarted = true; // Set this first to prevent double-starts
                        video.play().then(() => {
                            // Video started successfully
                        }).catch(e => {
                            videoConfig.hasStarted = false; // Reset on failure
                            // Try again with a small delay
                            video.currentTime = 0;
                            video.load();
                            setTimeout(() => {
                                videoConfig.hasStarted = true;
                                video.play().catch(() => {
                                    videoConfig.hasStarted = false;
                                });
                            }, 100);
                        });
                    }
                };
                
                // Create intersection observer to watch when video is fully visible
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting && entry.intersectionRatio >= 1.0 && !videoConfig.hasStarted) {
                            startPlayback();
                        }
                        // Once started, never pause
                    });
                }, {
                    threshold: [0, 1.0] // Trigger at 0% and 100% visibility
                });
                
                // Start observing the video element
                observer.observe(video);
                
                // Check if video is already visible on page load
                // Use requestAnimationFrame to ensure DOM is ready
                requestAnimationFrame(() => {
                    requestAnimationFrame(() => {
                        const rect = video.getBoundingClientRect();
                        const viewportHeight = window.innerHeight;
                        const videoHeight = rect.height;
                        
                        // Check if video is fully visible (same criteria as intersection observer)
                        const visibleHeight = Math.min(rect.bottom, viewportHeight) - Math.max(rect.top, 0);
                        const visibilityRatio = visibleHeight / videoHeight;
                        
                        if (visibilityRatio >= 1.0) {
                            startPlayback();
                        }
                    });
                });
            });
        })();
    </script>
    
    <!-- Scroll-triggered animations for showcase and insights text -->
    <script>
        (function() {
            // Elements to animate - both showcase and insights sections
            const animateElements = document.querySelectorAll('.showcase-eyebrow, .showcase-headline, .showcase-description, .insights-eyebrow, .insights-headline, .insights-hero-image, .insights-description');
            
            if (animateElements.length === 0) return;
            
            // Create intersection observer
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        // Add animation class when element comes into view
                        entry.target.classList.add('animate-in');
                        // Stop observing once animated
                        observer.unobserve(entry.target);
                    }
                });
            }, {
                threshold: 0.2, // Trigger when 20% of element is visible
                rootMargin: '0px 0px -50px 0px' // Slightly offset trigger point
            });
            
            // Start observing all elements
            animateElements.forEach(element => {
                observer.observe(element);
            });
        })();
    </script>
</body>
</html>